---
interface Props {
  title: string;
  description: string;
  url: string;
  image: string | null;
}

const { title, description, url, image } = Astro.props;

// Configuración de URL base
const cmsUrl = import.meta.env.PUBLIC_DIRECTUS_URL || 'https://cms.romahomestore.com';

// ⚡ MAX POWER: OPTIMIZACIÓN DE IMAGEN
// width=400: Más cerca del tamaño real (282px)
// height=225: Mantiene aspect-ratio 16:9 exacto
// fit=cover: Obliga a Directus a cortar la imagen, no solo encogerla
const imageUrl = image 
  ? (image.startsWith('http') ? image : `${cmsUrl}/assets/${image}?width=400&height=225&fit=cover&format=webp&quality=80`) 
  : 'https://placehold.co/600x400/222/fff?text=Proyecto'; 
---

<a 
  href={url} 
  target={url.startsWith('http') ? "_blank" : "_self"} 
  class="block p-4 border border-gray-700 rounded-xl bg-gray-900/50 hover:border-blue-500 transition-all group h-full flex flex-col"
>
  <div class="aspect-video w-full overflow-hidden rounded-lg mb-4 bg-gray-800 relative">
    <img 
      src={imageUrl} 
      alt={title} 
      width="400"
      height="225"
      class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 absolute inset-0"
      loading="lazy"
      decoding="async"
      referrerpolicy="no-referrer" 
    />
  </div>
  
  <h3 class="text-xl font-bold text-white mb-2 line-clamp-1">{title}</h3>
  <p class="text-gray-400 text-sm line-clamp-3">{description}</p>
</a>